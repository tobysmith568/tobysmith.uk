---
import Layout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import ProjectListItem from "../../components/Projects/ProjectListItem.astro";

const title = "My Projects";
const description = "A selection of the projects Toby has been working on recently.";

const projects = await getCollection("projects");
const sortedProjects = projects.sort((a, b) => a.data.sortWeight - b.data.sortWeight).reverse();
---

<Layout title={title} description={description}>
  <h1>My Projects</h1>
  <p>A selection of the projects I've been working on recently.</p>

  {sortedProjects.map(project => <ProjectListItem project={project} />)}
</Layout>
